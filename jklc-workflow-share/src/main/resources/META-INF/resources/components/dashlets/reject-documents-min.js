(function(){var f=YAHOO.util.Dom,j=YAHOO.util.Event,a=YAHOO.util.Selector;var c=Alfresco.util.encodeHTML,e=Alfresco.util.siteURL;Alfresco.dashlet.RejectDocuments=function h(l){Alfresco.dashlet.RejectDocuments.superclass.constructor.call(this,"Alfresco.dashlet.RejectDocuments",l,["datasource","datatable","animation"]);this.docs=[];return this};YAHOO.extend(Alfresco.dashlet.RejectDocuments,Alfresco.component.Base,{docs:null,onReady:function b(){this.widgets.dataSource=new YAHOO.util.DataSource(this.docs,{responseType:YAHOO.util.DataSource.TYPE_JSARRAY});var l=[{key:"icon",label:"Icon",sortable:false,formatter:this.bind(this.renderCellIcon),width:52},{key:"detail",label:"Description",sortable:false,formatter:this.bind(this.renderCellDetail)},];this.widgets.dataTable=new YAHOO.widget.DataTable(this.id+"-docs",l,this.widgets.dataSource,{MSG_EMPTY:this.msg("message.datatable.loading")});this.loadDocuments()},loadDocuments:function g(){Alfresco.util.Ajax.request({url:Alfresco.constants.PROXY_URI+"jklc/rejecteddocument",successCallback:{fn:this.onDocumenLoaded,scope:this}})},onDocumenLoaded:function d(s){var r=s.json,p,o,q=0;this.docs=[];for(p=0,o=r.length;p<o;p++){var l=YAHOO.lang.merge({},r[p]);this.docs[q]=l;q++}var n=function m(t,u,v){u.results=this.docs;this.widgets.dataTable.set("MSG_EMPTY","");this.widgets.dataTable.onDataReturnInitializeTable.call(this.widgets.dataTable,t,u,v)};this.widgets.dataSource.sendRequest(this.docs,{success:n,scope:this})},renderCellIcon:function k(m,l,n,o){f.setStyle(m,"width",n.width+"px");f.setStyle(m.parentNode,"width",n.width+"px");m.innerHTML='<img src="'+Alfresco.constants.URL_RESCONTEXT+'components/images/document-view-details-16.png" />'},renderCellDetail:function i(n,m,p,r){var o=m.getData(),q="";var l=e("document-details?nodeRef="+o.nodeRef);q+='<div class="empty"><h3><a href='+l+">"+o.name+"</a></h3>";n.innerHTML=q}})})();